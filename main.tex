\documentclass[openany]{ctexbook}

\usepackage{geometry}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{subfiles}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{authblk}
\usepackage{fontawesome5}
\usepackage{draftwatermark}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{tcolorbox}
\usepackage{subcaption}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{xurl}              % 比 url 更 aggressive，允许在任意字符断行
\def\UrlBreaks{\do. \do@ \do\ \do/ \do! \do_ \do| \do; \do: \do?} % 再补一刀
\usepackage[english]{babel}   % 或者 ngerman / french / ...
\babelprovide{import,main}    % 中文用 xeCJK 或 luaotfload 自带断字
\hyphenpenalty=1000           % 默认 50，值越大越不愿意断字
\usepackage{hyperref}


\lstset{
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue},
  commentstyle=\color{green!50!black},
  stringstyle=\color{red},
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  numbersep=5pt,
  backgroundcolor=\color{white},
  showspaces=false,
  showstringspaces=false,
  breaklines=true,
  frame=single
}

\setlist{nosep}

\makeatletter
\let\oldhref\href
\renewcommand{\href}[2]{%
  \oldhref{#1}{%
    \color{blue}\underline{#2}%
    \raisebox{0.2ex}{\tiny$\nearrow$}% 右上箭头
  }%
}

\geometry{b5paper, margin=0.5in}
% \setcounter{tocdepth}{2}

\SetWatermarkText{LCPU-2025}           % 设置水印内容
\SetWatermarkLightness{0.97}             % 设置水印透明度 0-1
\SetWatermarkScale{0.8}

\title{\Huge\textbf{北京大学计算机基础能力手册 \\ （精简版）}}

\author{臧炫懿}

\begin{document}

\maketitle

\frontmatter

\subfile{chapters/00-introduction.tex}

\subfile{chapters/00-explanation.tex}

\mainmatter

\tableofcontents

\part{零基础起步}

\subfile{chapters/01-encounter.tex}

\subfile{chapters/02-knowledge-acquirement.tex}

\subfile{chapters/03-initial-usage.tex}

\subfile{chapters/04-buy.tex}

\part{大学计算机前置}

% \subfile{chapters/05-coding.tex}

% \subfile{chapters/06-text-processing.tex}

% \subfile{chapters/07-drive-your-pc.tex}

\subfile{chapters/08-play-with-linux.tex}

% \part{走向开发}

% \subfile{chapters/09-pragmatic-coding.tex}

% \subfile{chapters/10-debugging.tex}

% \subfile{chapters/11-construction.tex}

% \subfile{chapters/12-cpp-package.tex}

% \part{附录}

% \appendix

% \subfile{chapters/100-mini-ics.tex}

% \subfile{chapters/101-cpp-guidance.tex}

% \subfile{chapters/102-python-guidance.tex}

% \subfile{chapters/104-python-advanced.tex}

% \subfile{chapters/999-other-tutorials.tex}

\backmatter

\subfile{chapters/99-postscript.tex}

\end{document}